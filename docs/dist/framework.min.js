var module=angular.module("framework",["ng","ngMessages"]);!function(){"use strict";angular.module("framework").factory("Events",[function(){function e(e,t){var n=document.documentElement||document.body.parentNode||document.body,r={x:window.pageXOffset||n.scrollLeft,y:window.pageYOffset||n.scrollTop};if("resize"===e.type){var i={w:this.getWidth(),h:this.getHeight()};this.view=i}var s=o(t),a={x:s.offsetLeft,y:s.offsetTop},u=s.getBoundingClientRect(),c=this.getPage(e);if(c){var l={x:c.x-r.x-u.left,y:c.y-r.y-u.top},f={x:c.x-r.x,y:c.y-r.y};this.relative=l,this.absolute=f}"resize"===this.type&&console.log(this.type),this.originalEvent=e,this.element=t,this.node=s,this.offset=a,this.rect=u}function t(){return self.innerWidth?self.innerWidth:document.documentElement&&document.documentElement.clientWidth?document.documentElement.clientWidth:document.body?document.body.clientWidth:void 0}function n(){return self.innerHeight?self.innerHeight:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientHeight:document.body?document.body.clientHeight:void 0}function r(e){var t=["click","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","contextmenu"],n=["touchstart","touchmove","touchend","touchcancel"],r=null;if(-1!==n.indexOf(e.type)){var i=null,o=e.originalEvent?e.originalEvent:e,s=o.touches.length?o.touches:o.changedTouches;s&&s.length&&(i=s[0]),i&&(r={x:i.pageX,y:i.pageY})}else-1!==t.indexOf(e.type)&&(r={x:e.pageX,y:e.pageY});return this.type=e.type,r}function i(t){function n(t){var n=new e(t,l.element);l.listeners.click.apply(this,[n])}function r(t){var n=new e(t,l.element);l.listeners.down.apply(this,[n]),l.removeTouchEvents()}function i(t){var n=new e(t,l.element);l.listeners.move.apply(this,[n])}function o(t){var n=new e(t,l.element);l.listeners.up.apply(this,[n])}function s(t){console.log("onResize",t);var n=new e(t,l.element);l.listeners.resize.apply(this,[n])}function a(t){var n=new e(t,l.element);l.listeners.down.apply(this,[n]),l.removeStandardEvents()}function u(t){var n=new e(t,l.element);l.listeners.move.apply(this,[n])}function c(t){var n=new e(t,l.element);l.listeners.up.apply(this,[n])}this.element=t,this.listeners={},this.standardEvents={click:{key:"click",callback:n},down:{key:"mousedown",callback:r},move:{key:"mousemove",callback:i},up:{key:"mouseup",callback:o},resize:{key:"resize",callback:s}},this.touchEvents={down:{key:"touchstart",callback:a},move:{key:"touchmove",callback:u},up:{key:"touchend",callback:c}};var l=this}function o(e){return e.length?e[0]:e}function s(e){return e.length?e:angular.element(e)}function a(e){var t=this,n=this.standardEvents,r=this.touchEvents,i=s(this.element),o=angular.element(window);return angular.forEach(e,function(e,s){if(t.listeners[s]){var a={};a[s]=t.listeners[s],u(a)}t.listeners[s]=e,n[s]&&("resize"===s?o.on(n[s].key,n[s].callback):i.on(n[s].key,n[s].callback)),r[s]&&i.on(r[s].key,r[s].callback)}),t}function u(e){var t=this,n=this.standardEvents,r=this.touchEvents,i=s(this.element),o=angular.element(window);return angular.forEach(e,function(e,s){n[s]&&("resize"===s?o.off(n[s].key,n[s].callback):i.off(n[s].key,n[s].callback)),r[s]&&i.off(r[s].key,r[s].callback),t.listeners[s]=null}),t}function c(){var e=this,t=e.standardEvents,n=(e.touchEvents,s(e.element));n.off("mousedown",t.down.callback),n.off("mousemove",t.move.callback),n.off("mouseup",t.up.callback)}function l(){var e=this,t=(e.standardEvents,e.touchEvents),n=s(e.element);n.off("touchstart",t.down.callback),n.off("touchmove",t.move.callback),n.off("touchend",t.up.callback)}return e.prototype={getPage:r,getWidth:t,getHeight:n},i.prototype={add:a,remove:u,removeStandardEvents:c,removeTouchEvents:l},i}])}(),function(){"use strict";angular.module("framework").directive("ngClick",["Events",function(e){function t(t,n,r,i){function o(e){n.removeClass("animate"),n.offsetWidth,s.style.left=e.relative.x+"px",s.style.top=e.relative.y+"px",setTimeout(function(){n.addClass("animate"),setTimeout(function(){n.removeClass("animate")},1e3)},10)}n.addClass("material");var s=document.createElement("material");n[0].appendChild(s);var a={click:o},u=new e(n).add(a);t.$on("$destroy",function(){u.remove(a)})}return{restrict:"A",priority:0,link:t}}])}(),function(){"use strict";angular.module("framework")}(),function(){"use strict";var e=angular.module("framework");e.directive("controlMessages",[function(){return{restrict:"E",templateUrl:"partials/framework/forms/messages",transclude:{message:"?messageItems"},link:function(e,t,n,r){}}}]),e.directive("control",["$parse",function(e){function t(e,t,n){e=e||"",t=t||"";var r=e.split(",");if(r.length>1){var i=r.shift();return angular.forEach(r,function(e,r){i=n?i.split("{"+r+"}").join("' + "+t+e+" + '"):i.split("{"+r+"}").join(t+e)}),n?"'"+i+"'":i}return t+e}var n=0;return{restrict:"A",templateUrl:function(e,t){var n="partials/framework/forms/text";switch(t.control){case"select":n="partials/framework/forms/select"}return n},scope:{ngModel:"=",required:"=",form:"@",title:"@",placeholder:"@",source:"=?",key:"@?",label:"@?"},require:"ngModel",transclude:!0,link:{pre:function(r,i,o,s,a){var u=r.label=r.label?r.label:"name",c=r.key=r.key?r.key:"id";if("select"===o.control){var l=o.filter?"| "+o.filter:"",f=t(u,"item.",!0);r.getOptions=function(){return o.number?"item."+c+" as "+f+" disable when item.disabled for item in source "+l:f+" disable when item.disabled for item in source "+l+" track by item."+c}}var d=(r.type=o.control,r.form=r.form||"form",r.title=r.title||"untitled");r.placeholder=r.placeholder||d,r.field=d.replace(/[^0-9a-zA-Z]/g,"").split(" ").join("")+ ++n;r.format=o.format||null,r.precision=o.precision||null,r.validate=o.validate||o.control,r.minLength=o.minLength||0,r.maxLength=o.maxLength||Number.POSITIVE_INFINITY,r.min=o.min||null,r.max=o.max||null,r.options=e(o.options)(r)||{},r.focus=!1,r.visible=!1,r.onChange=function(t){e(o.onChange)(r.$parent)},r.onFilter=function(t){e(o.onFilter)(r.$parent)},r.getType=function(){var e="text";switch(o.control){case"password":e=r.visible?"text":"password";break;default:e=o.control}return e},r.getClasses=function(){var t=e(r.form)(r.$parent),n=e(r.form+"."+r.field)(r.$parent);return{"control-focus":r.focus,"control-success":n.$valid,"control-error":n.$invalid&&(t.$submitted||n.$touched),"control-empty":!n.$viewValue}},r.getMessages=function(){var t=e(r.form)(r.$parent),n=e(r.form+"."+r.field)(r.$parent);return(t.$submitted||n.$touched)&&n.$error},r.toggleVisibility=function(){r.visible=!r.visible}}}}}]),e.directive("_control",["$http","$templateCache","$compile","$parse",function(e,t,n,r){function i(e,t,n){e=e||"",t=t||"";var r=e.split(",");if(r.length>1){var i=r.shift();return angular.forEach(r,function(e,r){i=n?i.split("{"+r+"}").join("' + "+t+e+" + '"):i.split("{"+r+"}").join(t+e)}),n?"'"+i+"'":i}return t+e}var o=0;return{restrict:"A",templateUrl:function(e,t){var n="partials/framework/forms/text";switch(t.control){case"select":n="partials/framework/forms/select"}return n},scope:{ngModel:"=",required:"=",form:"@",title:"@",placeholder:"@"},require:"ngModel",compile:function(e,t){return{pre:function(e,t,n){if("select"===n.control){var s=n.label?n.label:"name",a=n.key?n.key:"id",u=n.min?" | filter:gte('"+a+"', "+n.min+")":"",c=i(s,"item.",!0);e.options=n.number?"item."+a+" as "+c+" disable when item.disabled for item in "+n.source+u:c+" disable when item.disabled for item in "+n.source+u+" track by item."+a,console.log("control.compile.pre",e.options)}var l=(e.type=n.control,e.form=e.form||"form",e.title=e.title||"untitled");e.placeholder=e.placeholder||l,e.field=l.replace(/[^0-9a-zA-Z]/g,"").split(" ").join("")+ ++o;e.validate=n.validate||n.control,e.format=n.format||null,e.precision=n.precision||null,e.validate=n.validate||n.control,e.minLength=n.min||0,e.maxLength=n.max||Number.POSITIVE_INFINITY,e.options=r(n.options)(e)||{},e.focus=!1,e.visible=!1,e.getType=function(){var t="text";switch(n.control){case"password":t=e.visible?"text":"password";break;default:t=n.control}return t},e.getClasses=function(){var t=r(e.form)(e.$parent),n=r(e.form+"."+e.field)(e.$parent);return{"control-focus":e.focus,"control-success":n.$valid,"control-error":n.$invalid&&(t.$submitted||n.$touched),"control-empty":!n.$viewValue}},e.getMessages=function(){var t=r(e.form)(e.$parent),n=r(e.form+"."+e.field)(e.$parent);return(t.$submitted||n.$touched)&&n.$error}}}}}}]),e.directive("numberPicker",["$parse","$timeout",function(e,t){return{restrict:"A",template:'<div class="input-group">   <span class="input-group-btn"><button class="btn btn-outline-primary" type="button">-</button></span>   <div ng-transclude></div>   <span class="input-group-btn"><button class="btn btn-outline-primary" type="button">+</button></span></div>',replace:!0,transclude:!0,link:function(n,r,i,o){function s(r){var o=e(i.min)(n),s=e(i.numberPicker),a=s.assign;t(function(){a(n,Math.max(o,s(n)-1))})}function a(r){var o=e(i.max)(n),s=e(i.numberPicker),a=s.assign;t(function(){a(n,Math.min(o,s(n)+1))})}function u(){angular.element(l).off("touchstart mousedown",s),angular.element(f).off("touchstart mousedown",a)}var c=r[0],l=c.querySelectorAll(".input-group-btn > .btn")[0],f=c.querySelectorAll(".input-group-btn > .btn")[1];n.$on("$destroy",function(){u()}),function(){angular.element(l).on("touchstart mousedown",s),angular.element(f).on("touchstart mousedown",a)}()}}}])}(),function(){"use strict";angular.module("framework").directive("validate",["$filter",function(e){return{require:"ngModel",link:function(t,n,r,i){function o(){d=!0,l&&(n[0].value=i.$modelValue||null,i.$modelValue||i.$setViewValue(null))}function s(){if(l&&!i.$invalid)switch(c){case"date":case"datetime":case"datetime-local":n[0].value=i.$modelValue?e("date")(i.$modelValue,l):" ";break;default:n[0].value=i.$modelValue?e("number")(i.$modelValue,f)+" "+l:" "}}function a(){d=!1,s()}function u(){n.off("focus",o),n.off("blur",a)}var c=r.validate,l=r.format||"",f=r.precision||2,d=!1;switch(c){case"date":case"datetime":case"datetime-local":i.$formatters.push(function(t){return t?e("date")(t,l):null});break;case"number":i.$parsers.unshift(function(e){var t=!1;return void 0!==e&&""!==e?(t=-1!==String(e).indexOf(Number(e).toString()),e=Number(e),i.$setValidity("number",t),t&&(i.$setValidity("positive",e>=.01),void 0!==r.min&&i.$setValidity("range",e>=Number(r.min)),void 0!==r.max&&i.$setValidity("range",e<=Number(r.max)))):(t=!0,e=Number(e),i.$setValidity("number",!0),i.$setValidity("positive",!0),void 0!==r.min&&i.$setValidity("range",!0),void 0!==r.max&&i.$setValidity("range",!0)),e}),i.$formatters.push(function(t){return t?e("number")(t,f)+" "+l:null});break;case"anynumber":i.$parsers.unshift(function(e){var t=!1;return void 0!==e&&""!==e?(t=-1!==String(e).indexOf(Number(e).toString()),e=Number(e),i.$setValidity("number",t),t&&(void 0!==r.min&&i.$setValidity("range",e>=Number(r.min)),void 0!==r.max&&i.$setValidity("range",e<=Number(r.max)))):(t=!0,e=Number(e),i.$setValidity("number",!0),void 0!==r.min&&i.$setValidity("range",!0),void 0!==r.max&&i.$setValidity("range",!0)),e}),i.$formatters.push(function(t){return t||0===t?e("number")(t,f)+" "+l:null})}t.$on("$destroy",function(){u()}),function(){n.on("focus",o),n.on("blur",a)}()}}}])}(),function(){"use strict";angular.module("framework").factory("Hash",[function(){function e(t,n){t=t||"id",n=n?e.get(n):{},Object.defineProperties(this,{key:{value:t,enumerable:!1,writable:!1},pool:{value:n,enumerable:!1,writable:!1},length:{value:0,enumerable:!1,writable:!0}})}function t(e){return void 0!==this.pool[e]}function n(e){return this.pool[e]}function r(e){var t=this,n=this.key;return e?t.getId(e[n]):null}function i(e){var t=this;return this.pool[e[this.key]]=e,t.push(e),e}function o(e){var t=this,n=t.get(e);if(n)for(var r,i=0,o=Object.keys(e);i<o.length;i++)r=o[i],n[r]=e[r];else n=t.set(e);return n}function s(e){var t=this,n=this.pool,r=this.key,i=t.get(e);if(i){var o=t.indexOf(i);-1!==o&&t.splice(o,1),delete n[i[r]]}return t}function a(e){var t=this;if(!e)return t;for(var n=0;n<e.length;)t.add(e[n]),n++;return t}function u(e){var t=this;if(!e)return t;for(var n=0;n<e.length;)t.remove(e[n]),n++;return t}function c(){var e,t=this,n=t.key,r=t.pool,i=0;for(t.length;t.length;)e=t.shift(),delete r[e[n]],i++;return t}function l(e){var t=this;if(e)for(var n=0;n<t.length;)e(t[n],n),n++;return t}function f(e,t){var n=this;return e=e||this.key,n.sort(function(n,r){var i=t?r:n,o=t?n:r;return i[e]-o[e]}),n}function d(e){return this.forward(e,!0)}function h(e){if(e.key!==this.key||e.length!==this.length)return!0;for(var t=!1,n=0,r=this.length,i=this.key;t&&n<r;)t=this[n][i]!==e[n][i],n++}function m(){var e=this,t=this.pool,n=this.key;Object.keys(t).forEach(function(e){delete t[e]}),angular.forEach(e,function(e){t[e[n]]=e})}var p={};return e.get=function(e){return p[e]=p[e]||{}},e.prototype=new Array,e.prototype.has=t,e.prototype.getId=n,e.prototype.get=r,e.prototype.set=i,e.prototype.add=o,e.prototype.remove=s,e.prototype.each=l,e.prototype.addMany=a,e.prototype.removeMany=u,e.prototype.removeAll=c,e.prototype.forward=f,e.prototype.backward=d,e.prototype.differs=h,e.prototype.updatePool=m,e}])}(),function(){"use strict";angular.module("framework").directive("header",[function(){return{restrict:"E",templateUrl:"partials/header",transclude:{header:"?headerItems"},link:function(e,t,n,r){}}}])}(),function(){"use strict";angular.module("framework").service("Router",["$location","$timeout",function(e,t){function n(n,r){function i(){e.$$lastRequestedPath=e.path(),e.path(n)}r?t(function(){i()},r):i()}function r(n,r){function i(){n=e.$$lastRequestedPath||n,e.$$lastRequestedPath=null,e.path(n)}r?t(function(){i()},r):i()}function i(n,r){function i(){e.path(n)}r?t(function(){i()},r):t(function(){i()})}var o=this;o.redirect=n,o.path=r,o.apply=i}])}(),function(){var e=angular.module("framework");e.factory("State",["$timeout",function(e){function t(){this.isReady=!1,this.idle()}function n(){this.isBusy=!1,this.isError=!1,this.isErroring=!1,this.isSuccess=!1,this.isSuccessing=!1,this.button=null,this.errors=[]}function r(){return!this.isBusy&&!this.isErroring&&!this.isSuccessing}function i(){return!this.isBusy&&(this.isBusy=!0,this.isError=!1,this.isErroring=!1,this.isSuccess=!1,this.isSuccessing=!1,this.errors=[],!0)}function o(){this.isBusy=!1,this.isError=!1,this.isErroring=!1,this.isSuccess=!0,this.isSuccessing=!0,this.errors=[],e(function(){this.ready()}.bind(this),d)}function s(t){this.isBusy=!1,this.isError=!0,this.isErroring=!0,this.isSuccess=!1,this.isSuccessing=!1,this.errors.push(t),e(function(){this.ready()}.bind(this),d)}function a(){this.idle(),this.isReady=!0}function u(){return this.isError?this.errors[this.errors.length-1]:null}function c(){return{busy:this.isBusy,ready:this.isReady,successing:this.isSuccessing,success:this.isSuccess,errorring:this.isErroring,error:this.isError}}function l(e){var t={ready:"submit",busy:"sending",error:"error",success:"success"};e&&angular.extend(t,e);var n=t.ready;return this.isBusy?n=t.busy:this.isSuccess?n=t.success:this.isError&&(n=t.error),n}function f(e){var t=this,n=null;return n={ready:t.isReady,busy:t.isBusy,successing:t.isSuccessing,success:t.isSuccess,errorring:t.isErroring,error:t.isError},e&&angular.forEach(e,function(e,t){n[e]=n[t]}),n}var d=2e3;return t.prototype={idle:n,busy:i,enabled:r,error:s,ready:a,success:o,errorMessage:u,submitClass:c,labels:l,classes:f},t}]),e.factory("_State",["$timeout",function(e){function t(){this.isReady=!1,this.idle()}function n(){this.isBusy=!1,this.isError=!1,this.isErroring=!1,this.isSuccess=!1,this.isSuccessing=!1,this.button=null,this.errors=[]}function r(){return!this.isBusy&&!this.isErroring&&!this.isSuccessing}function i(e){return!this.isBusy&&(this.isBusy=!0,this.isError=!1,this.isErroring=!1,this.isSuccess=!1,this.isSuccessing=!1,this.errors=[],this.key=e,!0)}function o(){this.isBusy=!1,this.isError=!1,this.isErroring=!1,this.isSuccess=!0,this.isSuccessing=!0,this.errors=[],e(function(){this.isSuccessing=!1,this.key=null}.bind(this),h)}function s(t){this.isBusy=!1,this.isError=!0,this.isErroring=!0,this.isSuccess=!1,this.isSuccessing=!1,this.errors.push(t),e(function(){this.isErroring=!1,this.key=null}.bind(this),h)}function a(){this.isReady=!0,this.success()}function u(){return this.isError?this.errors[this.errors.length-1]:null}function c(){return{busy:this.isBusy,ready:this.isReady,successing:this.isSuccessing,success:this.isSuccess,errorring:this.isErroring,error:this.isError}}function l(e,t){var n={ready:"submit",busy:"sending",error:"error",success:"success"};t&&angular.extend(n,t);var r=n.ready;return this.key===e&&(this.isBusy?r=n.busy:this.isSuccess?r=n.success:this.isError&&(r=n.error)),r}function f(e,t){var n=this,r=null;return this.key===e&&(r={ready:n.isReady,busy:n.isBusy,successing:n.isSuccessing,success:n.isSuccess,errorring:n.isErroring,error:n.isError},t&&angular.forEach(t,function(e,t){r[e]=r[t]})),r}function d(e){return this.key&&this.key!==e}var h=2e3;return t.prototype={idle:n,busy:i,enabled:r,error:s,ready:a,success:o,errorMessage:u,submitClass:c,labels:l,classes:f,disabled:d},t}])}(),function(){"use strict";var e=angular.module("framework");e.factory("Cookie",["$q","$window",function(e,t){function n(){}return n.TIMEOUT=3e5,n._set=function(e,n,r){var i;if(r){var o=new Date;o.setTime(o.getTime()+24*r*60*60*1e3),i="; expires="+o.toGMTString()}else i="";t.document.cookie=e+"="+n+i+"; path=/"},n.set=function(e,t,r){try{var i=[],o=JSON.stringify(t,function(e,t){if("pool"!==e){if("object"==typeof t&&null!==t){if(-1!==i.indexOf(t))return;i.push(t)}return t}});i=null,n._set(e,o,r)}catch(n){console.log("Cookie.set.error serializing",e,t,n)}},n.get=function(e){for(var n=e+"=",r=t.document.cookie.split(";"),i=0;i<r.length;i++){for(var o=r[i];" "==o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(n)){var s=o.substring(n.length,o.length),a=null;try{a=JSON.parse(s)}catch(e){console.log("Cookie.get.error parsing",key,e)}return a}}return null},n.delete=function(e){n._set(e,"",-1)},n.on=function(t){function r(){if(a>u)o.reject("timeout");else{var e=n.get(t);e?o.resolve(e):(a+=s,i=setTimeout(r,s))}}var i,o=e.defer(),s=1e3,a=0,u=n.TIMEOUT;return r(),o.promise},n}]),e.factory("LocalStorage",["$q","$window","Cookie",function(e,t,n){function r(){}return r.isSupported=function(){var e=!1;try{e="localStorage"in t&&null!==t.localStorage,e?(t.localStorage.setItem("test","1"),t.localStorage.removeItem("test")):e=!1}catch(t){e=!1}return e}(),r.isSupported?(r.set=function(e,n){try{var r=[],i=JSON.stringify(n,function(e,t){if("pool"!==e){if("object"==typeof t&&null!==t){if(-1!==r.indexOf(t))return;r.push(t)}return t}});r=null,t.localStorage.setItem(e,i)}catch(t){console.log("LocalStorage.set.error serializing",e,n,t)}},r.get=function(e){var n=null;if(void 0!==t.localStorage[e])try{n=JSON.parse(t.localStorage[e])}catch(t){console.log("LocalStorage.get.error parsing",e,t)}return n},r.delete=function(e){t.localStorage.removeItem(e)},r.on=function(r){function i(e){if(clearTimeout(o),e.originalEvent.key==r)try{var t=JSON.parse(e.originalEvent.newValue);s.resolve(t)}catch(e){console.log("LocalStorage.on.error parsing",r,e),s.reject("error parsing "+r)}}var o,s=e.defer(),a=n.TIMEOUT;return angular.element(t).on("storage",i),o=setTimeout(function(){s.reject("timeout")},a),s.promise}):(console.log("LocalStorage.unsupported switching to cookies"),r.set=n.set,r.get=n.get,r.delete=n.delete,r.on=n.on),r}]),e.factory("SessionStorage",["$q","$window","Cookie",function(e,t,n){function r(){}return r.isSupported=function(){var e=!1;try{e="sessionStorage"in t&&void 0!==t.sessionStorage,e?(t.sessionStorage.setItem("test","1"),t.sessionStorage.removeItem("test")):e=!1}catch(t){e=!1}return e}(),r.isSupported?(r.set=function(e,n){try{var r=[],i=JSON.stringify(n,function(e,t){if("pool"!==e){if("object"==typeof t&&null!==t){if(-1!==r.indexOf(t))return;r.push(t)}return t}});r=null,t.sessionStorage.setItem(e,i)}catch(t){console.log("SessionStorage.set.error serializing",e,n,t)}},r.get=function(e){var n=null;if(void 0!==t.sessionStorage[e])try{n=JSON.parse(t.sessionStorage[e])}catch(t){console.log("SessionStorage.get.error parsing",e,t)}return n},r.delete=function(e){t.sessionStorage.removeItem(e)},r.on=function(r){function i(e){if(clearTimeout(o),e.originalEvent.key===r)try{var t=JSON.parse(e.originalEvent.newValue);s.resolve(t)}catch(e){console.log("SessionStorage.on.error parsing",r,e),s.reject("error parsing "+r)}}var o,s=e.defer(),a=n.TIMEOUT;return angular.element(t).on("storage",i),o=setTimeout(function(){s.reject("timeout")},a),s.promise}):(console.log("SessionStorage.unsupported switching to cookies"),r.set=n.set,r.get=n.get,r.delete=n.delete,r.on=n.on),r}])}(),function(){"use strict";var e=angular.module("framework");e.factory("Vector",function(){function e(e,t){this.x=e||0,this.y=t||0}return e.make=function(t,n){return new e(n.x-t.x,n.y-t.y)},e.size=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},e.normalize=function(t){var n=e.size(t);return t.x/=n,t.y/=n,t},e.incidence=function(e,t){return Math.atan2(t.y,t.x)-Math.atan2(e.y,e.x)},e.distance=function(e,t){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))},e.cross=function(e,t){return e.x*t.y-e.y*t.x},e.difference=function(t,n){return new e(t.x-n.x,t.y-n.y)},e.power=function(e,t){return(Math.abs(t.x-e.x)+Math.abs(t.y-e.y))/2},e.prototype={size:function(){return e.size(this)},normalize:function(){return e.normalize(this)},incidence:function(t){return e.incidence(this,t)},cross:function(t){return e.cross(this,t)},distance:function(t){return e.distance(this,t)},difference:function(t){return e.difference(this,t)},power:function(){return(Math.abs(this.x)+Math.abs(this.y))/2},towards:function(e,t){return t=t||.125,this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},add:function(e){return this.x+=e.x,this.y+=e.y,this},friction:function(e){return this.x*=e,this.y*=e,this},copy:function(t){return new e(this.x,this.y)},toString:function(){return"{"+this.x+","+this.y+"}"}},e}),e.factory("Utils",["$compile","$controller","Vector",function(e,t,n){function r(){}function i(e,t){var r=new n;if("touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchcancel"===e.type){var i=null,o=e.originalEvent?e.originalEvent:e,s=o.touches.length?o.touches:o.changedTouches;s&&s.length&&(i=s[0]),i&&(r.x=i.pageX,r.y=i.pageY)}else"click"!==e.type&&"mousedown"!==e.type&&"mouseup"!==e.type&&"mousemove"!==e.type&&"mouseover"!==e.type&&"mouseout"!==e.type&&"mouseenter"!==e.type&&"mouseleave"!==e.type&&"contextmenu"!==e.type||(r.x=e.pageX,r.y=e.pageY);return t&&(r.s=n.difference(r,t)),r.type=e.type,r}function o(e,t){e=angular.element(e)[0];var r=e.getBoundingClientRect(),i=new n(r.left,r.top);return n.difference(t,i)}function s(e,t){var n,r;if(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(e){return"function"==typeof document.body[e]&&(n=e,!0)}),e[n](t))return e;for(;null!==e;){if(null!==(r=e.parentElement)&&r[n](t))return r;e=r}return null}function a(e,t){var n;if(e===t)return e;for(;null!==e;){if(null!==(n=e.parentElement)&&n===t)return n;e=n}return null}function u(e,t,n){var r,i,o,s=null,a=0;n||(n={});var u=function(){a=!1===n.leading?0:v(),s=null,o=e.apply(r,i),s||(r=i=null)};return function(){var c=v();a||!1!==n.leading||(a=c);var l=t-(c-a);return r=this,i=arguments,l<=0||l>t?(s&&(clearTimeout(s),s=null),a=c,o=e.apply(r,i),s||(r=i=null)):s||!1===n.trailing||(s=setTimeout(u,l)),o}}function c(e,t){var n=null;return e&&angular.forEach(e,function(e){var r=!0;angular.forEach(t,function(t,n){r=r&&e[n]===t}),r&&(n=e)}),n}function l(n,r,i,o){r.html(i);var s=e(r.contents());if(o.controller){var a=n.$new();angular.extend(a,o);var u=t(o.controller,{$scope:a});o.controllerAs&&(n[o.controllerAs]=u),r.data("$ngControllerController",u),r.children().data("$ngControllerController",u),n=a}s(n)}function f(e){return function(t,n){return t[e]<n[e]?1:t[e]>n[e]?-1:0}}function d(e,t,n){e=e||"",t=t||"";var r=e.split(",");if(r.length>1){var i=r.shift();return angular.forEach(r,function(e,r){i=n?i.split("{"+r+"}").join("' + "+t+e+" + '"):i.split("{"+r+"}").join(t+e)}),n?"'"+i+"'":i}return t+e}function h(e,t){return e[t]}function m(e,t,n){return"string"==typeof t?m(e,t.split("."),n):1==t.length&&void 0!==n?e[t[0]]=n:0===t.length?e:m(e[t[0]],t.slice(1),n)}function p(e,t,n){return"string"==typeof t?p(e,t.split("."),n):1==t.length&&void 0!==n?e[t[0]]+=n:0===t.length?e:p(e[t[0]],t.slice(1),n)}function g(e,t,n){function r(){if(document.createEvent){var e=document.createElement("a");if(e.href=i,void 0!==e.download){var n=t||i.substring(i.lastIndexOf("/")+1,i.length);e.download=n}var r=document.createEvent("MouseEvents");return r.initEvent("click",!0,!0),e.dispatchEvent(r),!0}window.open(i.indexOf("?")>-1?i:i+"?download","_self")}n=n||"application/octet-stream";var i=null,o=new Blob([e],{type:n}),s=new window.FileReader;s.readAsDataURL(o),s.onloadend=function(){i=s.result,r()}}function y(e){var t={uri:"/api/reports/download",name:"Filename",extension:"txt",type:"text/plain",content:"Hello!"};e=angular.extend(t,e);var n=JSON.stringify(e),i=document.createElement("form"),o=document.createElement("input");return o.name="download",o.value=n,i.appendChild(o),i.action=e.uri,i.method="POST",i.target="ProjectDownloads",i.enctype="application/x-www-form-urlencoded",document.body.appendChild(i),i.submit(),setTimeout(function(){document.body.removeChild(i)},100),r}!function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),i=Math.max(0,16-(r-e)),o=window.setTimeout(function(){t(r+i)},i);return e=r+i,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),function(){Array.prototype.reduce||Object.defineProperty(Array.prototype,"reduce",{value:function(e){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,n=Object(this),r=n.length>>>0,i=0;if(2==arguments.length)t=arguments[1];else{for(;i<r&&!(i in n);)i++;if(i>=r)throw new TypeError("Reduce of empty array with no initial value");t=n[i++]}for(;i<r;)i in n&&(t=e(t,n[i],i,n)),i++;return t}})}();var v=Date.now||function(){return(new Date).getTime()},b=window.navigator.userAgent.toLowerCase(),w=-1!==b.indexOf("safari")&&-1===b.indexOf("chrome"),k=-1!==b.indexOf("trident")||-1!==b.indexOf("edge")||-1!==b.indexOf("msie"),E=!w&&!k&&-1!==b.indexOf("chrome"),x=-1!==b.indexOf("mobile");navigator.userAgent.toLowerCase().indexOf("chrome"),navigator.userAgent.toLowerCase().indexOf("safari");return r.reverseSortOn=f,r.getTouch=i,r.getRelativeTouch=o,r.getClosest=s,r.getClosestElement=a,r.throttle=u,r.where=c,r.format=d,r.compileController=l,r.reducer=h,r.reducerSetter=m,r.reducerAdder=p,r.downloadFile=g,r.serverDownload=y,r.toMd5=function(e){return Md5.encode(e)},r.ua={safari:w,msie:k,chrome:E,mobile:x},angular.forEach(r.ua,function(e,t){e&&angular.element(document.getElementsByTagName("body")).addClass(t)}),r}])}();
//# sourceMappingURL=framework.min.js.map
